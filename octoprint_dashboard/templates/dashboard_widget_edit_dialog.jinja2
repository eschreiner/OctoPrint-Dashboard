<v-dialog :persistent="!!editingWidgetConfirmTypeChange || editingWidgetDialogDisallowClose" width="500" v-model="is_editingWidget" scrollable :fullscreen="$vuetify.breakpoint.name == 'xs'">
    <v-card>
        <v-card-title class="text-h5 lighten-2">
            Edit Widget
        </v-card-title>

        <v-card-text v-if="settings != null">
            <template v-if="is_editingWidget">
                <v-select hide-details="auto" :key="layout[editingWidget].typeKey" :value="layout[editingWidget].type" @input="editingWidgetTypeChange($event)" :items="widgetsArray" filled label="Type"></v-select>
                <space></space>
                <v-text-field hide-details="auto" v-model="layout[editingWidget].title" maxlength="40" required label="Title *" filled :rules="[(v) => v == '' ? 'Title cannot be empty' : true]"></v-text-field>
                <space></space>
                <component v-if="widgets[layout[editingWidget].type] != null" :is="widgets[layout[editingWidget].type].settings" :widget="layout[editingWidget]"></component>
            </template>
        </v-card-text>

        <v-divider></v-divider>

        <v-card-actions>
            <v-spacer></v-spacer>
            <v-btn color="primary" text @click="is_editingWidget = -1">
                {{"{{editingWidgetIsNew ? 'CANCEL' : 'DELETE'}}"}}
            </v-btn>
            <v-btn color="primary" elevation="2" @click="is_editingWidget = 0" :disabled="editingWidgetDialogDisallowClose">
                DONE
            </v-btn>
        </v-card-actions>
    </v-card>
</v-dialog>
<v-dialog persistent width="400" :value="editingWidgetConfirmTypeChange" scrollable :fullscreen="$vuetify.breakpoint.name == 'xs'">
    <v-card>
        <v-card-title class="text-h5 lighten-2">
            Confirm Erase Widget
        </v-card-title>

        <v-card-text>
            Changing the type of this widget will erase it's settings. Are you sure?
        </v-card-text>

        <v-divider></v-divider>

        <v-card-actions>
            <v-spacer></v-spacer>
            <v-btn color="primary" text @click="editingWidgetConfirmTypeChange = 0">
                CANCEL
            </v-btn>
            <v-btn color="error" elevation="2" @click="editingWidgetConfirmTypeChange = 2">
                ERASE
            </v-btn>
        </v-card-actions>
    </v-card>
</v-dialog>